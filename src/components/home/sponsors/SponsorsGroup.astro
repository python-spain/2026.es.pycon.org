---
import type { ISponsor, TSponsorTier } from '../../../types/sponsors'
import { texts } from '../../../i18n/home'
import { TIER_COLORS } from '../../../constants'
import { hexToRgba } from '../../../utils/colors'

interface Props {
  tierId: TSponsorTier
  lang: string
  title: string
  sponsors: ISponsor[]
}

const { title, sponsors, lang, tierId } = Astro.props
const t = texts[lang as keyof typeof texts]

const IMG_WITH_BY_TIER: Record<TSponsorTier, number> = {
  main: 200,
  platinum: 150,
  gold: 120,
  silver: 100,
  bronze: 80,
}
---

<div>
  <h4 style={`background-color: ${hexToRgba(TIER_COLORS[tierId], 0.2)};`} class="p-2">{title}</h4>
  {
    sponsors.length > 0 ? (
      <div class="flex flex-wrap gap-4 mt-4">
        {sponsors.map((sponsor) => (
          <a
            href={sponsor.website}
            target="_blank"
            rel="noopener noreferrer"
            class="flex flex-col items-center justify-center p-4 border rounded-lg hover:shadow-lg transition-shadow duration-300"
          >
            <img src={sponsor.logo} alt={sponsor.name} width={IMG_WITH_BY_TIER[tierId]} />
            <small>{sponsor.name}</small>
          </a>
        ))}
      </div>
    ) : (
      <p class="text-gray-500 mt-2">{t['sponsors.none']}</p>
    )
  }
</div>
